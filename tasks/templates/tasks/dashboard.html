{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Task Tracker</title>
    <link rel="stylesheet" href="{% static 'tasks/style.css' %}">
    <script src="{% static 'tasks/scripts.js' %}" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Student Task Tracker</h1>

        <!-- Add Task Form -->
        <form id="taskForm" action="{% url 'add_task' %}" method="post">
            {% csrf_token %}
            <input type="text" name="title" placeholder="Task Title" required>
            <input type="text" name="description" placeholder="Description">
            <input type="date" name="due_date" required>
            <select name="priority_level">
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
            </select>
            <button type="submit">Add Task</button>
        </form>

        <!-- Search & Sort -->
        <div class="search-sort">
            <form method="get" action="">
                <input type="text" name="search" placeholder="Search tasks..." value="{{ search_query }}">
                <button type="submit">Search</button>
            </form>
            <form method="get" action="">
                <label for="sort">Sort by:</label>
                <select name="sort" onchange="this.form.submit()">
                    <option value="due_date">Due Date</option>
                    <option value="priority">Priority</option>
                </select>
            </form>
        </div>

        <!-- Task List -->
        <ul class="task-list">
            {% for task in tasks %}
            <li class="task {% if task.is_completed %}completed{% endif %}">
                <span class="title">{{ task.title }}</span>
                <span class="description">{{ task.description }}</span>
                <span class="due-date">{{ task.due_date }}</span>
                <span class="priority {{ task.priority_level|lower }}">{{ task.priority_level }}</span>

                <div class="actions">
                    <a href="{% url 'toggle_complete' task.pk %}" class="action-btn complete"><i class="fa-solid fa-check"></i></a>
                    <a href="{% url 'update_task' task.pk %}" class="action-btn edit"><i class="fa-solid fa-pen"></i></a>
                    <a href="{% url 'delete_task' task.pk %}" class="action-btn delete"><i class="fa-solid fa-trash"></i></a>
                </div>
            </li>
            {% empty %}
            <li>No tasks found.</li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
